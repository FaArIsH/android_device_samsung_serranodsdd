From 221eafffd113bc9c9ab524601d45cb8c7cfda938 Mon Sep 17 00:00:00 2001
From: k2wl <k2wl@github.com>
Date: Thu, 4 Sep 2014 14:12:08 +0530
Subject: [PATCH] updated patch

Change-Id: I3e0f2a7b4db68e83bb1ebb4b456c6cfefba33c98
Signed-off-by: k2wl <k2wl@github.com>
---
 .../android/systemui/statusbar/phone/PhoneStatusBar.java |  5 +----
 telephony/java/android/telephony/SignalStrength.java     |  2 +-
 2 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java b/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java
index 6762c4d..5acc1b3 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java
@@ -821,7 +821,6 @@ public class PhoneStatusBar extends BaseStatusBar implements DemoMode,
             }
 
             mCarrierLabel = (TextView)mStatusBarWindow.findViewById(R.id.carrier_label);
-            mSubsLabel = (TextView)mStatusBarWindow.findViewById(R.id.subs_label);
             mShowCarrierInPanel = (mCarrierLabel != null);
 
             if (DEBUG) Log.v(TAG, "carrierlabel=" + mCarrierLabel + " show=" +
@@ -832,12 +831,10 @@ public class PhoneStatusBar extends BaseStatusBar implements DemoMode,
                 // for mobile devices, we always show mobile connection info here (SPN/PLMN)
                 // for other devices, we show whatever network is connected
                 if (mMSimNetworkController.hasMobileDataFeature()) {
-                    mMSimNetworkController.addMobileLabelView(mCarrierLabel);
+                    mMSimNetworkController.addSubsLabelView(mCarrierLabel);
                 } else {
                     mMSimNetworkController.addCombinedLabelView(mCarrierLabel);
                 }
-                mSubsLabel.setVisibility(View.VISIBLE);
-                mMSimNetworkController.addSubsLabelView(mSubsLabel);
                 // set up the dynamic hide/show of the label
                 mPile.setOnSizeChangedListener(new OnSizeChangedListener() {
                     @Override
diff --git a/telephony/java/android/telephony/SignalStrength.java b/telephony/java/android/telephony/SignalStrength.java
index a2e061c..646e930 100644
--- a/telephony/java/android/telephony/SignalStrength.java
+++ b/telephony/java/android/telephony/SignalStrength.java
@@ -423,7 +423,7 @@ public class SignalStrength implements Parcelable {
      * 27.007 8.5
      */
     public int getGsmSignalStrength() {
-        return this.mGsmSignalStrength;
+        return (0xFFFFFF00 & this.mGsmSignalStrength) / 85;
     }
 
     /**
-- 
1.9.1

